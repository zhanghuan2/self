// Generated by CoffeeScript 1.6.3
(function() {
  var basePath, commander, config, configFile, configFilePath, fs, outerConfig, path, port, _;

  fs = require("fs");

  path = require("path");

  _ = require("lodash");

  commander = require("commander");

  config = {
    serverPort: 8080,
    filesHome: "public",
    viewsHome: void 0,
    componentsHome: void 0,
    dataFiles: [
      "test/data/data.js",
      "test/data/product.js"
    ],
    extraHelpers: [],
    oldMode: false,
    pageMode: false,
    assetsPrefix: void 0
  };

  configFilePath = 'config.js'

  configFile = path.join(process.cwd(),configFilePath);

  basePath = path.dirname(configFile);


  outerConfig = require(configFile);
  _.assign(config, outerConfig.server);


  config.filesHome = path.resolve(basePath, outerConfig.paths.public || config.filesHome);

  if (config.viewsHome) {
    config.viewsHome = path.resolve(basePath, config.viewsHome);
  } else {
    config.viewsHome = path.resolve(basePath, config.filesHome, "views");
  }

  if (config.componentsHome) {
    config.componentsHome = path.resolve(basePath, config.componentsHome);
  } else {
    config.componentsHome = path.resolve(basePath, config.filesHome, "components");
  }

  config.dataFiles = _.map(config.dataFiles, function(dataFile) {
    return path.resolve(basePath, dataFile);
  });

  config.extraHelpers = _.map(config.extraHelpers, function(helperFile) {
    return path.resolve(basePath, helperFile);
  });

  module.exports = config;

}).call(this);
